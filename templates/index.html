<!doctype html>
<html lang="en" class="h-full">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Lift Force Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <script>tailwind.config = {darkMode: 'class'};</script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script" async></script>
    <style>
      body { font-family: 'Inter', ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif; }
    </style>
  </head>
  <body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen flex flex-col">
    <main class="container mx-auto p-4 flex-grow space-y-4">
      <!-- Top Bar Card -->
      <div class="bg-white dark:bg-gray-800 p-4 rounded-xl shadow-md flex flex-wrap items-center gap-4">
        <div>
          <label for="unit-system" class="block text-sm font-medium mb-1">Unit System</label>
          <select id="unit-system" name="unit-system" class="border rounded px-2 py-1 bg-gray-50 dark:bg-gray-700 dark:border-gray-600">
            <option>SI</option>
            <option>MKS</option>
            <option>SI-MPa</option>
            <option>BFT</option>
            <option>BIN</option>
          </select>
        </div>
        <div>
          <label for="precision" class="block text-sm font-medium mb-1">Precision</label>
          <select id="precision" name="precision" class="border rounded px-2 py-1 bg-gray-50 dark:bg-gray-700 dark:border-gray-600">
            <option value="0">0</option>
            <option value="2" selected>2</option>
            <option value="3">3</option>
            <option value="6">6</option>
          </select>
        </div>
        <div class="ml-auto">
          <button id="theme-toggle" type="button" aria-label="Toggle light/dark mode" class="border rounded px-3 py-1 bg-gray-200 dark:bg-gray-700 dark:border-gray-600">Toggle Theme</button>
        </div>
      </div>
      <!-- Formula Card -->
      <div class="bg-white dark:bg-gray-800 p-4 rounded-xl shadow-md">
        <p class="text-center text-xl">$$ F_L = \tfrac{1}{2}\,\rho\,V_{\text{res}}^{2}\,C_L\,A $$</p>
      </div>
      <!-- Inputs Card -->
      <div class="bg-white dark:bg-gray-800 p-4 rounded-xl shadow-md">
        <form id="lift-form" hx-post="/calculate" hx-target="#result" hx-swap="innerHTML" class="space-y-4">
          <div>
            <label for="rho" class="block text-sm font-medium mb-1">ρ (kg/m³)</label>
            <input type="number" step="any" id="rho" name="rho" value="1.225" class="w-full border rounded px-2 py-1 bg-gray-50 dark:bg-gray-700 dark:border-gray-600" />
          </div>
          <div>
            <label for="vres" class="block text-sm font-medium mb-1">V<sub>res</sub> (m/s)</label>
            <input type="number" step="any" id="vres" name="vres" value="50" class="w-full border rounded px-2 py-1 bg-gray-50 dark:bg-gray-700 dark:border-gray-600" />
          </div>
          <div>
            <label for="cl" class="block text-sm font-medium mb-1">C<sub>L</sub></label>
            <input type="number" step="any" id="cl" name="cl" value="1.0" class="w-full border rounded px-2 py-1 bg-gray-50 dark:bg-gray-700 dark:border-gray-600" />
          </div>
          <div>
            <label for="area" class="block text-sm font-medium mb-1">A (m²)</label>
            <input type="number" step="any" id="area" name="area" value="10" class="w-full border rounded px-2 py-1 bg-gray-50 dark:bg-gray-700 dark:border-gray-600" />
          </div>
          <div class="flex gap-2 pt-2">
            <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white rounded px-4 py-2 shadow">Calculate</button>
            <button type="button" id="restore-btn" class="bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 rounded px-4 py-2 shadow">Restore Defaults</button>
            <button type="button" id="zero-btn" class="bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 rounded px-4 py-2 shadow">Reset to 0</button>
          </div>
        </form>
      </div>
      <!-- Result Placeholder -->
      <div id="result" class="bg-white dark:bg-gray-800 p-4 rounded-xl shadow-md text-center">Result will appear here</div>
    </main>
    <footer class="text-center py-4 text-sm text-gray-500 dark:text-gray-400">v0.1</footer>
    <script>
      const defaults = {rho: '1.225', vres: '50', cl: '1.0', area: '10'};
      document.getElementById('restore-btn').addEventListener('click', () => {
        for (const [k, v] of Object.entries(defaults)) {
          document.getElementById(k).value = v;
        }
      });
      document.getElementById('zero-btn').addEventListener('click', () => {
        ['rho','vres','cl','area'].forEach(id => { document.getElementById(id).value = 0; });
      });
      document.getElementById('theme-toggle').addEventListener('click', () => {
        document.documentElement.classList.toggle('dark');
      });
    </script>
  </body>
</html>
